{namespace yag = Tx_Yag_ViewHelpers}

<f:layout name="default" />
<f:section name="content">
    <h1>{album.title}</h1>
    <f:if condition="{album}">
        <f:then>
            <p>{album.description}</p>
            <f:if condition="{images}">
	                <f:then>
	                    <div class="tx-yag-album-images-container">
		                <f:for each="{images}" as="image">
		                    <div class="tx-yag-album-entry">
		                         <f:link.action action="single" controller="Image" arguments="{image : image, album : album, gallery: gallery}">
		                             <img class="yag-album-image-thumb" src="/{image.thumb.filePath}" />
		                         </f:link.action><br />
		                         {image.title}<br />
		                         <f:if condition="{image.description}">{image.description}<br /></f:if>
		                         <f:if condition="{userIsAdmin}">
			                         <f:link.action controller="Image" action="edit" arguments="{image : image, album : album, gallery:gallery}"><f:translate key="image.links.editImage" /></f:link.action>
			                         &nbsp;
			                         <f:link.action controller="Image" action="delete" arguments="{image : image, album : album, gallery:gallery}"><f:translate key="image.links.deleteImage" /></f:link.action><br />
		                         </f:if>
	                        </div>
	                    </f:for>
	                    <div style="clear: left;"/>
	                    </div>
	                    <div class="tx-yag-album-pager">
	                    <f:if condition="{pager}">
		                     <f:for each="{pager.pages}" as="page">
		                         <f:if condition="{pager.currentPageNumber} == {page.pageNr}">
		                             <f:then>
		                                  {page.pageNr}&nbsp;
		                             </f:then>
		                             <f:else>
		                                  <f:link.action controller="Album" action="index" arguments="{pager_currentPageNumber : page.pageNr, image : image, album : album, gallery:gallery}">{page.pageNr}</f:link.action>&nbsp;	                                
		                             </f:else>
		                         </f:if>
		                     </f:for>
		                     <f:if condition="{pager.currentPageNumber} == all">
		                         <f:then>
		                             all&nbsp;
		                         </f:then>
		                         <f:else>
		                             <f:link.action controller="Album" action="index" arguments="{pager_currentPageNumber : pager.allPage, image : image, album : album, gallery : gallery}">all</f:link.action>&nbsp;
	                             </f:else>
                             </f:if>
	                    </f:if>
	                    </div>
	                </f:then>
	                <f:else>
	                    <p>No images found in album!</p>
	             </f:else>
	            </f:if>
            <br />
            
            <div class="tx-yag-album-links-block">
                <f:if condition="{userIsAdmin}">
		            <f:link.action controller="Album" action="editImages" arguments="{album : album, gallery : gallery}"><f:translate key="album.links.editImages" /></f:link.action><br />
		            <f:link.action controller="Album" action="edit" arguments="{album : album, gallery : gallery}"><f:translate key="album.links.editAlbum" /></f:link.action><br />
		            <f:link.action controller="Album" action="delete" arguments="{album : album, gallery : gallery}"><f:translate key="album.links.deleteAlbum" /></f:link.action><br />
		            <f:link.action action="index" controller="AlbumContent" arguments="{gallery : gallery, album : album}">
		               <f:translate key="albumcontent.links.addAlbumContent" />
		            </f:link.action>
	            </f:if>
            </div>   
            <br/>
            <br/>
         <f:if condition="{gallery}">
             <f:then>
                 <f:link.action action="show" controller="Gallery" arguments="{gallery : gallery}">
                     <f:translate key="gallery.links.backToGallery" /><br />
                 </f:link.action>
             </f:then>
         </f:if>
         <f:link.action action="index" controller="Gallery"><f:translate key="gallery.links.backToGalleryOverview" /></f:link.action>
        </f:then>
    </f:if>
</f:section>